(window["webpackJsonpweather-test-app"]=window["webpackJsonpweather-test-app"]||[]).push([[0],{12:function(e,t,n){},41:function(e,t,n){e.exports=n(70)},46:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),i=n.n(c),s=(n(46),n(12),n(15)),o=n(16),u=n(18),l=n(17),m=n(19),p=n(11),d=function(e){var t=Object(a.useState)(""),n=Object(p.a)(t,2),c=n[0],i=n[1],s=Object(a.useState)(!1),o=Object(p.a)(s,2),u=o[0],l=o[1],m=Object(a.useState)(!1),d=Object(p.a)(m,2),f=d[0],E=d[1],v=Object(a.useState)(!1),h=Object(p.a)(v,2),g=h[0],O=h[1],S=function(){O(!1),E(!1),l(!1)},y=function(t){var n=t.currentTarget.innerText;e.changeColor(n)};return r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"formSearchAndSetting"},r.a.createElement("div",{className:"searchPath"},r.a.createElement("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",list:"cities",className:"inputCity",onChange:function(e){i(e.currentTarget.value)},value:c}),r.a.createElement("button",{onClick:function(){c.trim().length>0?(e.getWeather(c),e.setCity(c)):(e.changeStatus("ERROR"),e.setErrorMessage("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"))},className:"buttonSearch"},"\u041d\u0430\u0439\u0442\u0438 "),r.a.createElement("datalist",{id:"cities"},e.cities.map((function(e,t){return r.a.createElement("option",{key:t,value:e})})))),r.a.createElement("div",{className:"setting"},r.a.createElement("div",{className:"settingImg",onClick:function(){l(!u),E(!1),O(!1)}},r.a.createElement("img",{alt:"setting",src:"http://icons.iconarchive.com/icons/pelfusion/long-shadow-media/256/Settings-icon.png"})),u&&r.a.createElement("div",{className:"menuSetting"},r.a.createElement("div",{onClick:function(){l(!1),E(!0)}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440"),r.a.createElement("div",{onClick:function(){l(!1),O(!0)}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0446\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430"),r.a.createElement("div",{onClick:S},"\u0432\u044b\u0439\u0442\u0438")),f&&r.a.createElement("div",{className:"menuSetting"},r.a.createElement("div",{onClick:function(){return e.changeFontSize(.75)}},"75%"),r.a.createElement("div",{onClick:function(){return e.changeFontSize(1)}},"100%"),r.a.createElement("div",{onClick:function(){return e.changeFontSize(1.25)}},"125%"),r.a.createElement("div",{onClick:function(){return e.changeFontSize(1.5)}},"150%"),r.a.createElement("div",{onClick:S},"\u0432\u044b\u0439\u0442\u0438")),g&&r.a.createElement("div",{className:"menuSetting"},r.a.createElement("div",{onClick:y},"yellow"),r.a.createElement("div",{onClick:y},"violet"),r.a.createElement("div",{onClick:y},"white"),r.a.createElement("div",{onClick:S},"\u0432\u044b\u0439\u0442\u0438"))),r.a.createElement("div",{className:"status"},"ERROR"===e.status&&r.a.createElement("div",null,r.a.createElement("img",{alt:"error",src:"https://docs.zendframework.com/zend-expressive/images/error.png"})),"SUCCESS"===e.status&&r.a.createElement("img",{alt:"success",src:"https://cdn4.iconfinder.com/data/icons/colicon/24/checkmark_done_complete-512.png"}),"INPROGRESS"===e.status&&r.a.createElement("img",{alt:"error",src:"https://www.avira.com/cache-buster-23424/static/common/images/loading.gif"})),"ERROR"===e.status&&r.a.createElement("div",{className:"error"},e.errorMessage)))},f=n(7),E=n(40),v=n(35),h=n(6),g=n.n(h),O=n(10),S=n(36),y=n.n(S).a.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),b={getWeatherAPI:function(){var e=Object(O.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("weather?q=".concat(t,"&appid=").concat(n));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:if(e.prev=7,e.t0=e.catch(0),404!==e.t0.response.status){e.next=13;break}return e.abrupt("return",Promise.reject("city not found"));case 13:return e.abrupt("return",Promise.reject("some error"));case 14:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},w="cities",C=function(e){var t=JSON.stringify(e.filter((function(e,t){return t<5})));return localStorage.setItem(w,t),Promise.resolve()},j=function(){var e=JSON.parse(localStorage.getItem(w));return Promise.resolve(e||[])};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _="ERROR",T="INPROGRESS",k="SUCCESS",D={coefficient:1,color:"white",status:"NOT_INITIALIZED",city:"",API_KEY:"1ae16df993c07c547ccd1942b3965093",cities:[],errorMessage:"",data:{temp:void 0,main:null,city:null,windSpeed:null,pressure:null,hamidity:null,sunrise:null,sunset:null,nameCity:null}},I=function(e){return{type:"WD/ADD_CITY",city:e}},A=function(e){return{type:"WD/SET_CITY_FROM_LOCALSTORAGE",cities:e}},W=function(e){return{type:"WD/CHANGE_STATUS",status:e}},P=function(e){return{type:"WD/SET_ERROR_MESSAGE",error:e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WD/SET_WEATHER":var n={temp:t.temp,main:t.main,windSpeed:t.windSpeed,pressure:t.pressure,hamidity:t.hamidity,sunrise:t.sunrise,sunset:t.sunset,nameCity:t.nameCity};return R({},e,{data:n});case"WD/ADD_CITY":return R({},e,{cities:[t.city].concat(Object(E.a)(e.cities))});case"WD/SET_CITY_FROM_LOCALSTORAGE":return R({},e,{cities:t.cities});case"WD/SET_CITY_FROM_INPUT":return R({},e,{city:t.value});case"WD/CHANGE_FONT_SIZE":return R({},e,{coefficient:t.coefficient});case"WD/CHANGE_COLOR":return R({},e,{color:t.color});case"WD/CHANGE_STATUS":return R({},e,{status:t.status});case"WD/SET_ERROR_MESSAGE":return R({},e,{errorMessage:t.error});default:return e}},F=function(e){var t=new Date;return t.setTime(e),t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},G=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.loadCities()}},{key:"render",value:function(){return r.a.createElement(d,this.props)}}]),t}(r.a.Component),x=Object(f.b)((function(e){return{city:e.data.city,cities:e.data.cities,status:e.data.status,errorMessage:e.data.errorMessage}}),(function(e){return{getWeather:function(t){e(function(e){return function(){var t=Object(O.a)(g.a.mark((function t(n,a){var r,c,i,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,c=a().data.cities,n(W(T)),t.prev=3,t.next=6,b.getWeatherAPI(e,a().data.API_KEY);case 6:i=t.sent,n((o=Math.round(i.main.temp-273),u=i.weather[0].description,l=i.wind.speed,m=i.main.pressure,p=i.main.humidity,d=F(i.sys.sunrise),f=F(i.sys.sunset),E=i.name,{type:"WD/SET_WEATHER",temp:o,main:u,windSpeed:l,pressure:m,hamidity:p,sunrise:d,sunset:f,nameCity:E})),n(W(k)),0===(s=c.filter((function(e){return e.toUpperCase()===r.toUpperCase()}))).length&&n(I(r)),0===s.length&&C(a().data.cities),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n(W(_)),n(P(t.t0));case 18:case"end":return t.stop()}var o,u,l,m,p,d,f,E}),t,null,[[3,14]])})));return function(e,n){return t.apply(this,arguments)}}()}(t))},setCity:function(t){e(function(e){return{type:"WD/SET_CITY_FROM_INPUT",value:e}}(t))},loadCities:function(){e(function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:n=e.sent,t(A(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},changeFontSize:function(t){e(function(e){return{type:"WD/CHANGE_FONT_SIZE",coefficient:e}}(t))},changeColor:function(t){e(function(e){return{type:"WD/CHANGE_COLOR",color:e}}(t))},changeStatus:function(t){e(W(t))},setErrorMessage:function(t){e(P(t))}}}))(G),z=function(e){var t=new Date,n=function(e){return e<10&&(e="0"+e),e};return r.a.createElement("div",{className:"weather"},r.a.createElement("div",{style:{fontSize:18*e.coefficient,color:e.color}},e.data.temp&&r.a.createElement("div",{className:"weatherInfo"},r.a.createElement("div",{className:"weatherInfoFirstPath"},r.a.createElement("span",null,e.data.nameCity),r.a.createElement("span",null,t.toDateString()),r.a.createElement("span",{style:{fontSize:30*e.coefficient},className:"time"},n(t.getHours()),":",n(t.getMinutes())),r.a.createElement("span",null,"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u0435\u0442\u0440\u0430: ",e.data.windSpeed," \u043c/\u0441"),r.a.createElement("span",null,"\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435: ",e.data.pressure)),r.a.createElement("div",{className:"weatherInfoSecondPath"},r.a.createElement("div",{className:"temp"},r.a.createElement("span",{style:{fontSize:40*e.coefficient}},e.data.temp,"\xb0C")),r.a.createElement("div",{className:"sun"},r.a.createElement("div",null,"    \u0412\u0440\u0435\u043c\u044f \u0432\u043e\u0441\u0445\u043e\u0434\u0430 \u0441\u043e\u043b\u043d\u0446\u0430: ",e.data.sunrise," "),r.a.createElement("div",null,"    \u0412\u0440\u0435\u043c\u044f \u0437\u0430\u0445\u043e\u0434\u0430 \u0441\u043e\u043b\u043d\u0446\u0430: ",e.data.sunset," "))))))},H=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(z,this.props)}}]),t}(r.a.Component),U=Object(f.b)((function(e){return{data:e.data.data,coefficient:e.data.coefficient,city:e.data.city,color:e.data.color}}),null)(H),L=function(e){return r.a.createElement("div",{className:"weatherApp"},r.a.createElement(x,null),r.a.createElement(U,null))};var Y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(8),Z=n(37),B=Object(J.c)({data:M}),K=Object(J.d)(B,Object(J.a)(Z.a));window.store=K;var q=K,$=n(39);i.a.render(r.a.createElement(f.a,{store:q},r.a.createElement($.a,null,r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[41,1,2]]]);
//# sourceMappingURL=main.9c7f9221.chunk.js.map